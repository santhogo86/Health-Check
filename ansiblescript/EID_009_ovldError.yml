- name: Execute Ovld Error Check Command
  shell: kubectl exec {{ pod_name }} -n {{ namespace }} -- {{ EID_009_CMD }}
  register: cmdOutput
  ignore_errors: yes

- name: Display command output
  debug:
    msg: "Command output: {{ cmdOutput.stdout | default('No output in check mode') }}"

- name: Parse ovld error output
  set_fact:
    ovld_error_output: "{{ cmdOutput.stdout | default('') }}"

- name: Count ovld error occurrences
  set_fact:
    ovld_error_count: "{{ ovld_error_output | int | default(0) }}"

- name: Check if ovld error count is zero
  set_fact:
    ovld_error_zero: "{{ ovld_error_count | int == 0 }}"

- name: Determine final result
  set_fact:
    final_result: "{{ 'PASS' if ovld_error_zero else 'FAIL' }}"

- name: Result
  debug:
    msg: "{{ final_result }} - Ovld error check: {{ ovld_error_count }} errors found"

- name: Set final result for EID_009
  set_fact:
    eid_009_final_result: "{{ final_result }}"
